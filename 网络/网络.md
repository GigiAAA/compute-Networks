多态：在封装的基础上，使用户知道的信息更少（只需知道父类类型而不用管子类）。

### 网络基础（一）

计算机网络发展背景：

网络发展

独立发展：计算机之间相互独立；每个终端A、B、C各自持有客户数据。

网络互联：多台计算机连接在一起。

局域网LAN：计算机数量更多，通过交换机和路由器将电脑连接在一起。（主机之间物理距离较小）

交换机和路由器之间功能可相互实现。

广域网WAN：将远隔千里的计算机连接在一起。（主机之间物理距离更大）

所谓“局域网”和“广域网”只是一个相对概念。

#### 网络协议

**协议分层**

协议分层好处：**最大好处在于封装。**

1.把大的复杂的问题拆分为小的简单的问题；

2.能很灵活的对某层协议进行变更和替换，同时又不会对其他层造成影响。

#### OSI七层模型

物理层、数据链路层、网络层、传输层、会话层、表示层、应用层（1-7层）

#### TCP/IP五层（或四层）模型--四层/五层区分决定于是否算物理层，算不算均可以

（硬件/数据链路层）、网卡层-----**设备驱动程序与网络接口**

互联网层**（实现传输层的中间过程）**（ARP IP ICMP）、传输层（TCP UDP UDP-Lite SCTP DCCP）**（点对点传输--只考虑起点终点不考虑中间过程）**----**操作系统内核**（操作系统包含了内核及一些应用程序）

应用层（DNS URI HTML HTTP TLS/SSL SMTP POP IMAP MIME TELNET SSH FTP SNMP MIB SIP RTP LDAP）--**应用程序**

（1-5层）

TCP/IP分层模型对应OSI参考模型

（硬件）网卡层对应物理层、数据链路层

互联网层、传输层对应网络层、传输层

应用层对应会话层、表示层、应用层

一般而言

对于一台主机，它的操作系统内核实现了从传输层到物理层的内容；

**对于一台路由器，它实现了从网络层到物理层；（网络层->数据链路层->物理层）**

**对于一台交换机，它实现了从数据链路层到物理层；**

**传统的路由器和交换机的区别如上，实现的层数不同，但是现在的两者无区别。**

对于集线器，它只实现了物理层。

**但以上实现并不绝对，很多交换机也实现了网络层的转发；很多路由器也实现了部分传输层的内容（比如端口转发）**

#### 网络传输流程图

同一网段内的两台主机进行文件传输：

![1](C:\Users\14665\Desktop\网络\1.png)

两台计算机通过TCP/IP协议通讯的过程如下所示：

FTP协议：用作文件传输

![2](C:\Users\14665\Desktop\网络\2.png)

**客户端：主动发起请求的一方为客户端。**

#### 服务器：被动接受数据的一方为服务器。

#### 两台计算机通过TCP/IP协议传输数据完整过程：

![3](C:\Users\14665\Desktop\网络\3.png)

![4](C:\Users\14665\Desktop\网络\4.png)

#### 跨网段的主机的文件传输，数据从一台计算机到另一台计算机传输过程中要经过一个或多个路由器。

![5](C:\Users\14665\Desktop\网络\5.png)

数据封装和分用

1.不同的协议层对数据包有不同的称谓，在传输层叫做段(segment)，在网络层叫做数据报(datagram)，在链路层叫做帧(frame)。

2.应用层数据通过协议栈发到网络上时，每层协议都要加上一个数据首部(header)，陈伟封装(Encapsulation)。

3.首部信息中包含了一些类似于首部有多长，载荷(payload)有多长，上层协议是什么等信息。

4.数据封装成帧后发送到传输介质上，到达目的的主机后每层协议再剥掉相应的首部，根据首部中的“上层协议字段”将数据交给对应的上层协议处理。

#### IP地址

IP协议有IPv4和IPv6两个版本。但没有特殊说明时，默认都是指IPv4

1.IP地址在IP协议中，用来标识网络中不同主机的地址；

2.对于IPv4来说，IP地址是一个4字节，32位的整数；

3.我们通常也使用“点分十进制”的字符串表示IP地址，例如192.168.0.1；用点分割的每一个数字表示一字节，范围是0-255.

#### MAC地址

1.MAC地址用来识别数据链路层中相连的字节；

2.长度为48为，及6个字节。一般用16进制数字加上冒号的形式来表示（例如：08:00:27:03:fb:19）

3.在网卡出厂时就确定了，不能修改。mac地址通常是唯一的（虚拟机中的mac地址不是真实的mac地址，会冲突，也有些网卡支持用户配置mac地址）。



### 网络基础二（面试重要）

#### **应用层**：我们程序员写的一个个解决我们实际问题，满足我们日常需求的网络程序，都在应用层。

**成熟的应用层协议**

1.HTTP协议：

2.HTTPS协议：

3.FTP协议：用于文件传输

4.DNS协议：用于域名解析

5.SSH协议：用于远程登陆

.......

**应用层除了成熟的应用层协议之外，还存在大量的用户自定制的协议。**

#### **用户自定制协议方法：**

举例：假如此时要实现一个网络版本的计算器。

![6](C:\Users\14665\Desktop\网络\6.png)

#### HTTP协议（超文本传输协议）（面试最重要）

#### URL（完整的URL必须以https://开头）

平时我们所说的“网址”其实就是说的URL

例如：https://www.baidu.com/

但www.baidu.com不是URL，因为它缺少了前面的https://。

完整的URL格式

![7](C:\Users\14665\Desktop\网络\7.png)

#### urlencode（转义）和urldecode（解码 可通过百度转义工具进行转换）

特殊字符和汉字等都需要转义。

#### HTTP协议格式

fiddler工具 抓包

![8](C:\Users\14665\Desktop\网络\8.png)

lll